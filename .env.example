# OrçamentosOnline Environment Configuration
# Copy this file to .env and update with your values
# CRONOS Agent - Environment Management
# Date: September 25, 2025

# ============================================================================
# CORE APPLICATION SETTINGS
# ============================================================================
APP_NAME=OrçamentosOnline
APP_VERSION=1.0.0
APP_ENV=development
APP_DEBUG=true
APP_URL=http://localhost:3001

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
POSTGRES_PASSWORD=your_secure_postgres_password_here
POSTGRES_DB=orcamentos
POSTGRES_USER=orcamentos_user

# Database connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_TIMEOUT=30000

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_PASSWORD=your_secure_redis_password_here
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================
# Generate strong secrets using: openssl rand -base64 32
JWT_SECRET=your_jwt_secret_key_minimum_32_characters
JWT_REFRESH_SECRET=your_jwt_refresh_secret_key_minimum_32_characters
SESSION_SECRET=your_session_secret_key_minimum_32_characters

# Password hashing
BCRYPT_ROUNDS=12

# API Rate limiting
RATE_LIMIT_WINDOW=15  # minutes
RATE_LIMIT_MAX=100    # requests per window

# ============================================================================
# FILE UPLOAD & STORAGE
# ============================================================================
MAX_FILE_SIZE=10485760  # 10MB in bytes
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf

# AWS S3 Configuration (for production file storage)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=sa-east-1
AWS_S3_BUCKET=orcamentos-files-prod

# ============================================================================
# EMAIL CONFIGURATION
# ============================================================================
# SMTP Settings for transactional emails
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@example.com
SMTP_PASS=your_email_password

# Email settings
FROM_EMAIL=noreply@infigital.net
FROM_NAME=OrçamentosOnline

# ============================================================================
# NOTIFICATION CHANNELS
# ============================================================================
# WhatsApp Business API (optional)
WHATSAPP_API_KEY=your_whatsapp_api_key
WHATSAPP_PHONE_ID=your_whatsapp_phone_id

# Telegram Bot API (optional)
TELEGRAM_BOT_TOKEN=your_telegram_bot_token

# ============================================================================
# EXTERNAL INTEGRATIONS
# ============================================================================
# Canva Integration (for design imports)
CANVA_CLIENT_ID=your_canva_client_id
CANVA_CLIENT_SECRET=your_canva_client_secret

# Digital Signature Provider
DOCUSIGN_INTEGRATION_KEY=your_docusign_key
DOCUSIGN_USER_ID=your_docusign_user_id
DOCUSIGN_ACCOUNT_ID=your_docusign_account_id

# ============================================================================
# DEVELOPMENT TOOLS
# ============================================================================
# Adminer (Database management)
ADMINER_DESIGN=flat

# Redis Commander
REDIS_COMMANDER_PASSWORD=your_redis_commander_password

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================
# Grafana
GRAFANA_PASSWORD=your_grafana_admin_password

# Application monitoring
SENTRY_DSN=your_sentry_dsn_url
LOG_LEVEL=info

# ============================================================================
# SSL/TLS CONFIGURATION
# ============================================================================
# SSL Certificate settings (for production)
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/private.key

# Let's Encrypt settings
LETSENCRYPT_EMAIL=admin@infigital.net
LETSENCRYPT_STAGING=true  # Set to false for production certificates

# ============================================================================
# CORS & SECURITY HEADERS
# ============================================================================
CORS_ORIGINS=http://localhost:3001,https://infigital.net
CORS_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-Requested-With

# Security headers
HELMET_CSP_DIRECTIVES=default-src 'self'; script-src 'self' 'unsafe-inline'

# ============================================================================
# BACKUP & RECOVERY
# ============================================================================
# Database backup settings
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=orcamentos-backups
BACKUP_ENCRYPTION_KEY=your_backup_encryption_key

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================
# Node.js settings
NODE_OPTIONS=--max-old-space-size=2048
UV_THREADPOOL_SIZE=128

# Database connection settings
DB_STATEMENT_TIMEOUT=30000
DB_QUERY_TIMEOUT=20000

# Redis settings
REDIS_CONNECT_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=5000

# ============================================================================
# LOCALIZATION
# ============================================================================
DEFAULT_LOCALE=pt_BR
SUPPORTED_LOCALES=pt_BR,en_US
TIMEZONE=America/Sao_Paulo

# ============================================================================
# FEATURE FLAGS
# ============================================================================
# Enable/disable features for different environments
FEATURE_WHATSAPP_NOTIFICATIONS=true
FEATURE_TELEGRAM_NOTIFICATIONS=true
FEATURE_CANVA_IMPORT=true
FEATURE_DIGITAL_SIGNATURE=true
FEATURE_REAL_TIME_COLLABORATION=true
FEATURE_ANALYTICS=true

# ============================================================================
# DEVELOPMENT-SPECIFIC SETTINGS
# ============================================================================
# Hot reload and debugging (development only)
CHOKIDAR_USEPOLLING=true
FAST_REFRESH=true
NODE_ENV=development

# API development settings
API_DOCS_ENABLED=true
API_DOCS_PATH=/api/docs
SWAGGER_UI_ENABLED=true

# ============================================================================
# TESTING CONFIGURATION
# ============================================================================
# Test database (separate from development)
TEST_DATABASE_URL=postgresql://orcamentos_user:test_password@localhost:5433/orcamentos_test
TEST_REDIS_URL=redis://localhost:6380

# Test data settings
SEED_TEST_DATA=true
TEST_USER_EMAIL=test@example.com
TEST_USER_PASSWORD=testpassword123

# ============================================================================
# PRODUCTION-SPECIFIC SETTINGS
# ============================================================================
# CDN and static assets (production)
CDN_URL=https://cdn.infigital.net
STATIC_URL=https://static.infigital.net

# Production database settings
DB_SSL_MODE=require
DB_SSL_CERT=/path/to/ssl/cert
DB_SSL_KEY=/path/to/ssl/key
DB_SSL_CA=/path/to/ssl/ca

# Production Redis settings
REDIS_TLS_ENABLED=true
REDIS_CLUSTER_ENABLED=false

# Health check settings
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# ============================================================================
# NOTES
# ============================================================================
# 1. Never commit the actual .env file to version control
# 2. Use strong, unique passwords for all services
# 3. Generate JWT secrets using cryptographically secure methods
# 4. Update default passwords before deploying to any environment
# 5. Consider using environment-specific override files:
#    - .env.local (local development)
#    - .env.staging (staging environment)
#    - .env.production (production environment)
# 6. Validate all environment variables at application startup
# 7. Use tools like dotenv-safe to ensure required variables are set