# TESTER Suite - Automatic Update Integration

## How to Integrate TESTER Suite with Automatic Updates

### Step 1: Create Your TESTER GitHub Repository

1. **Create a new repository on GitHub:**
   - Repository name: `tester-suite` (or your preferred name)
   - Description: "Autonomous Stress Testing Platform with Claude AI Integration"
   - Public or Private (your choice)

2. **Push the TESTER-SUITE code:**
   ```bash
   cd /path/to/TESTER-SUITE
   git remote add origin https://github.com/yourusername/tester-suite.git
   git branch -M main
   git push -u origin main
   ```

### Step 2: Add TESTER as Submodule to Your Projects

**In OrÃ§amentosOnline project:**
```bash
cd /path/to/OrÃ§amentosOnline

# Remove current tester directory (if exists)
rm -rf tester

# Add TESTER as submodule
git submodule add https://github.com/yourusername/tester-suite.git tester

# Initialize and update
git submodule update --init --recursive

# Commit the submodule addition
git add .gitmodules tester
git commit -m "feat: add TESTER suite as submodule for automatic updates"
git push
```

**In any other project:**
```bash
cd /path/to/another-project

# Add TESTER as submodule
git submodule add https://github.com/yourusername/tester-suite.git tester

# Update package.json (if Node.js project)
{
  "scripts": {
    "test:stress": "cd tester && TARGET_URL=http://localhost:3000 docker-compose up -d",
    "test:stop": "cd tester && docker-compose down",
    "tester:update": "git submodule update --remote tester && git add tester && git commit -m 'chore: update TESTER suite'"
  }
}
```

### Step 3: Automatic Update Workflow

**Manual Updates:**
```bash
# Update TESTER to latest version
git submodule update --remote tester

# Check what changed
cd tester
git log --oneline HEAD~5..HEAD

# Test the update
docker-compose up -d

# If everything works, commit the update
cd ..
git add tester
git commit -m "chore: update TESTER suite to latest version"
git push
```

**Automated Updates with GitHub Actions:**

Create `.github/workflows/update-tester.yml`:
```yaml
name: Update TESTER Suite

on:
  schedule:
    - cron: '0 9 * * MON'  # Every Monday at 9 AM
  workflow_dispatch:  # Manual trigger

jobs:
  update-tester:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
      with:
        submodules: true
        token: ${{ secrets.GITHUB_TOKEN }}

    - name: Update TESTER submodule
      run: |
        git config user.name 'github-actions[bot]'
        git config user.email 'github-actions[bot]@users.noreply.github.com'
        git submodule update --remote tester

    - name: Check for changes
      id: changes
      run: |
        if git diff --quiet; then
          echo "has_changes=false" >> $GITHUB_OUTPUT
        else
          echo "has_changes=true" >> $GITHUB_OUTPUT
        fi

    - name: Create Pull Request
      if: steps.changes.outputs.has_changes == 'true'
      uses: peter-evans/create-pull-request@v5
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        commit-message: 'chore: update TESTER suite to latest version'
        title: 'Update TESTER Suite'
        body: |
          ðŸ¤– **Automated TESTER Suite Update**

          This PR updates the TESTER suite submodule to the latest version.

          ## Changes
          - Updated TESTER suite to latest commit
          - Please review changelog and test before merging

          ## Testing
          ```bash
          cd tester
          docker-compose up -d
          # Visit http://localhost:8888 to verify
          docker-compose down
          ```

          Auto-generated by GitHub Actions.
        branch: update-tester-suite
        delete-branch: true
```

### Step 4: Benefits of This Approach

**âœ… Automatic Propagation:**
- Update TESTER once in the main repository
- All projects using it as submodule can pull updates easily
- Version control for TESTER updates

**âœ… Version Control:**
```bash
# Use specific version
cd tester
git checkout v2.1.0
cd ..
git add tester
git commit -m "pin TESTER to v2.1.0"

# Update to latest
git submodule update --remote tester
```

**âœ… Team Collaboration:**
```bash
# When team member clones project
git clone --recursive https://github.com/yourteam/project

# Or if already cloned
git submodule update --init --recursive
```

**âœ… Easy Updates Across All Projects:**
```bash
# In each project directory
git submodule update --remote tester
git add tester
git commit -m "update TESTER"
```

### Step 5: Publishing to npm (Optional)

**Create npm package structure:**
```bash
# In TESTER-SUITE directory
npm init -y

# Update package.json
{
  "name": "@yourusername/tester-suite",
  "version": "2.0.0",
  "description": "Autonomous Stress Testing Platform with Claude AI Integration",
  "main": "src/index.js",
  "bin": {
    "tester-suite": "./bin/cli.js"
  },
  "scripts": {
    "start": "docker-compose up -d",
    "stop": "docker-compose down",
    "dev": "node dev-start.js"
  },
  "keywords": ["testing", "stress-testing", "automation", "claude-ai"],
  "author": "Your Name",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/yourusername/tester-suite.git"
  }
}

# Publish to npm
npm publish --access public
```

**Use in projects:**
```bash
npm install -g @yourusername/tester-suite

# In any project
tester-suite start --target=http://localhost:3000
```

### Step 6: Example Integration Workflow

**Development Workflow:**
1. Developer improves TESTER in standalone repository
2. Commits and pushes to `tester-suite` repository
3. All projects using TESTER as submodule can update with:
   ```bash
   git submodule update --remote tester
   ```
4. Projects automatically benefit from improvements

**Release Workflow:**
1. Tag releases in TESTER repository:
   ```bash
   git tag -a v2.1.0 -m "Release v2.1.0: Enhanced Claude integration"
   git push origin v2.1.0
   ```
2. Projects can pin to specific versions:
   ```bash
   cd tester
   git checkout v2.1.0
   ```

### Step 7: Troubleshooting

**Common Issues and Solutions:**

1. **Submodule not updating:**
   ```bash
   git submodule deinit tester
   git rm tester
   git submodule add https://github.com/yourusername/tester-suite.git tester
   ```

2. **Merge conflicts with submodule:**
   ```bash
   git checkout --theirs tester
   git add tester
   ```

3. **Reset submodule to specific commit:**
   ```bash
   cd tester
   git checkout abc123  # specific commit hash
   cd ..
   git add tester
   ```

This approach gives you the perfect balance of:
- **Centralized development** (one TESTER repository)
- **Distributed usage** (multiple projects)
- **Automatic updates** (git submodule update --remote)
- **Version control** (pin to specific versions when needed)